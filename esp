-- Function to create a billboard for a player
local function createPlayerBillboard(player)
    -- Ensure the player has a character
    if player and player.Character then
        -- Create BillboardGui
        local billboardGui = Instance.new("BillboardGui")
        billboardGui.Parent = player.Character.Head
        billboardGui.Size = UDim2.new(0, 100, 0, 50)
        billboardGui.StudsOffset = Vector3.new(0, 3, 0) -- Adjust height offset

        -- Create TextLabel for player's name
        local nameLabel = Instance.new("TextLabel")
        nameLabel.Parent = billboardGui
        nameLabel.Size = UDim2.new(1, 0, 1, 0)
        nameLabel.Text = player.Name
        nameLabel.TextScaled = true
        nameLabel.BackgroundTransparency = 1
        nameLabel.TextColor3 = Color3.new(1, 1, 1) -- White text color

        -- Make BillboardGui always face the camera
        game:GetService("RunService").RenderStepped:Connect(function()
            billboardGui.CFrame = CFrame.new(billboardGui.CFrame.Position, game.Workspace.CurrentCamera.CFrame.Position)
        end)
    end
end

-- Function to handle button click
local function onButtonClick()
    -- Get all players in the game
    local players = game.Players:GetPlayers()

    -- Create a billboard for each player
    for _, player in ipairs(players) do
        createPlayerBillboard(player)
    end
end

-- Connect button click event
local button = script.Parent -- Assuming the button is a child of the script's parent
button.MouseButton1Click:Connect(onButtonClick)
